Caso voce tenha adicionado os arquivos com git add e depois
dado commit mas percebeu que nao fez corretamente voce
pode usar esse comandos:

VocÃª pode voltar o commit e manter as alteraÃ§Ãµes no seu 
diretÃ³rio de trabalho (Ãºtil se quiser revisar):
- git reset --soft HEAD~1

Para remover os arquivos da Ã¡rea de staging (git add):
git restore --staged srcs/

ğŸ“ Estrutura Inicial
Title: Criar Estrutura de DiretÃ³rios do Projeto
Description:

markdown
Copy
Edit
- Criar a seguinte Ã¡rvore de diretÃ³rios:
  - /srcs/
  - /srcs/requirements/
    - mariadb/
    - nginx/
    - wordpress/
    - tools/
    - bonus/
- Criar `Makefile` na raiz.
- Criar `docker-compose.yml` dentro de `srcs/`.
- Criar arquivo `.env` dentro de `srcs/`.
- Atualizar `.gitignore` para ignorar `.env`.

ğŸ³ Docker Compose
Title: Configurar Docker Compose (Redes e Volumes)
Description:
- Definir uma network customizada no docker-compose.yml.
- Criar volume para persistÃªncia dos dados do MariaDB.
- Criar volume para persistÃªncia dos arquivos do WordPress.
- Garantir que containers usam apenas a network especificada.
- Definir polÃ­ticas de restart: always.

ğŸ›¢ï¸ ServiÃ§o MariaDB
Title: Implementar ServiÃ§o MariaDB

O Maria db e um sistema de gerenciamento de banco de dados relacional ()

Description:
- Criar Dockerfile para MariaDB baseado em Alpine ou Debian.
- Instalar MariaDB Server.
- Configurar usuÃ¡rio administrador e usuÃ¡rio normal.
- Nenhum dos usernames deve conter "admin" ou variaÃ§Ãµes.
- Usar scripts de inicializaÃ§Ã£o para criaÃ§Ã£o do banco.
- Garantir que o processo rode como PID 1 (sem tail -f, sleep, etc).
- Utilizar variÃ¡veis de ambiente para configuraÃ§Ãµes sensÃ­veis.

âœ… ExplicaÃ§Ã£o completa do porquÃª do MariaDB neste projeto:
ğŸ“Œ O que Ã© o MariaDB?
MariaDB Ã© um sistema de gerenciamento de banco de dados relacional, open-source e compatÃ­vel com MySQL. Ele serve como backend para aplicaÃ§Ãµes como o WordPress armazenarem dados de forma estruturada e persistente.

ğŸ¯ Por que estamos usando MariaDB nesse projeto Inception?
Porque o WordPress â€” a aplicaÃ§Ã£o principal deste projeto â€” precisa de um banco de dados para:

Armazenar usuÃ¡rios.
Postagens, comentÃ¡rios, pÃ¡ginas.
Metadados (como configuraÃ§Ãµes de plugins, temas etc).

â¡ï¸ O MariaDB entra como o coraÃ§Ã£o de persistÃªncia do WordPress, mantendo tudo que nÃ£o Ã© arquivo.
ğŸ§  O que vocÃª deve entender tecnicamente:
Conceito	                      ExplicaÃ§Ã£o
Container isolado	              O MariaDB roda isolado, em um container dedicado, separado do WordPress.
ComunicaÃ§Ã£o via rede docker	    Os containers falam entre si por uma docker network (no caso, inception).
Volume	                        Os dados da base ficam persistidos fora do container (ex: /home/login/data/mariadb).
VariÃ¡veis de ambiente (.env)	  SÃ£o usadas para passar user, password, db name etc., sem expor no Dockerfile.
Scripts de inicializaÃ§Ã£o	      SÃ£o arquivos .sh ou .sql que criam usuÃ¡rios, banco etc., na primeira vez.
UsuÃ¡rio administrador         	Deve ser criado com nome que nÃ£o contenha "admin" ou "administrator", conforme exigÃªncia.
SeguranÃ§a	                      Sem senhas hardcoded. Nada de usar root sem necessidade.

âœ… 1. Checklist de ValidaÃ§Ã£o da Task "Implementar ServiÃ§o MariaDB"

ğŸ“‹ **Checklist TÃ©cnico e Funcional**

### ğŸ”§ Estrutura e ConfiguraÃ§Ã£o
- Existe um diretÃ³rio `requirements/mariadb` com:
  - `Dockerfile`
  - `conf/my.cnf`
  - `tools/dbscript.sh`
- Existe um `.env` na pasta `srcs/` com as seguintes variÃ¡veis:
  - `MYSQL_ROOT_PASSWORD`
  - `MYSQL_USER`
  - `MYSQL_PASSWORD`
  - `MYSQL_DATABASE` (opcional, mas recomendado)

### ğŸ³ Dockerfile
- A imagem base Ã© Alpine ou Debian.
- Instala `mariadb-server` corretamente.
- Copia `my.cnf` para o local correto.
- Copia e executa `dbscript.sh`.
- ExpÃµe a porta `3306`.
- Usa `ENTRYPOINT` com `exec` e sem hacks como `tail -f` ou `sleep`.

### ğŸ”’ SeguranÃ§a e Conformidade
- NÃ£o hÃ¡ senha hardcoded nos arquivos `.sh` ou `Dockerfile`.
- Senhas e configuraÃ§Ãµes sensÃ­veis estÃ£o no `.env`.
- Nenhum nome de usuÃ¡rio inclui â€œadminâ€ ou variaÃ§Ãµes proibidas.
- O processo principal roda como PID 1 com `exec`.

### ğŸ“¦ Docker Compose (opcional para este passo, mas recomendÃ¡vel)
- O `docker-compose.yml` estÃ¡ pronto ou com o serviÃ§o `mariadb` corretamente configurado para testes.
- Volume para persistÃªncia de dados estÃ¡ definido (`/var/lib/mysql`).
- O container usa a rede `inception` e o nome `mariadb`.

ğŸ§ª 2. Como Testar se EstÃ¡ Tudo Certo
ğŸ”Œ **Passos para Testar MariaDB em Container**

â–¶ï¸ Executar o Build (caso ainda nÃ£o tenha `docker-compose`)
cd srcs
docker build -t mariadb_test ./requirements/mariadb
docker run --rm -it --env-file .env mariadb_test

Isso serve para testar se o container inicializa corretamente e o banco Ã© criado.

â–¶ï¸ Se jÃ¡ estiver com docker-compose.yml, use:
docker-compose up --build mariadb

ğŸ’» Conecte-se ao banco dentro do container:
docker exec -it mariadb mariadb -u $MYSQL_USER -p
# Digite a senha definida em .env (MYSQL_PASSWORD)

ğŸ§¾ Execute os comandos SQL para verificar:
SHOW DATABASES;
-- Deve mostrar "WordPress"

SHOW GRANTS FOR 'rog_dev'@'%';
-- Deve mostrar os privilÃ©gios do usuÃ¡rio

ğŸ” Teste de acesso via root (se necessÃ¡rio):
docker exec -it mariadb mariadb -u root -p$MYSQL_ROOT_PASSWORD

Criar Dockerfile para MariaDB baseado em Alpine ou Debian. #16
Instalar MariaDB Server. #17
Configurar usuÃ¡rio administrador e usuÃ¡rio normal. #18
Nenhum dos usernames deve conter "admin" ou variaÃ§Ãµes. #19
Usar scripts de inicializaÃ§Ã£o para criaÃ§Ã£o do banco. #20
Garantir que o processo rode como PID 1 (sem tail -f, sleep, etc). #21
Utilizar variÃ¡veis de ambiente para configuraÃ§Ãµes sensÃ­veis. #22











ğŸ§° ServiÃ§o WordPress + PHP-FPM
Title: Implementar ServiÃ§o WordPress + PHP-FPM
Description:
- Criar Dockerfile baseado em Alpine ou Debian.
- Instalar php, php-fpm e extensÃµes necessÃ¡rias (php-mysql, etc).
- Instalar WordPress manualmente na imagem.
- Configurar php-fpm corretamente para servir o WordPress.
- WordPress deve apontar para o container MariaDB.
- Utilizar variÃ¡veis de ambiente para configuraÃ§Ã£o de acesso ao banco.
- Persistir os arquivos de WordPress no volume correto.

âœ… ExplicaÃ§Ã£o completa do porquÃª do WordPress neste projeto:

ğŸ“Œ O que Ã© o WordPress?
O WordPress Ã© um CMS (Content Management System) amplamente utilizado para criaÃ§Ã£o de sites e blogs. Ele Ã© escrito em PHP e utiliza um banco de dados (como MariaDB) para armazenar seus conteÃºdos dinÃ¢micos, como posts, usuÃ¡rios, pÃ¡ginas e configuraÃ§Ãµes.

ğŸ¯ Por que estamos usando o WordPress neste projeto Inception?
Porque Ã© o principal serviÃ§o da stack: o objetivo final do projeto Ã© entregar um ambiente onde o WordPress esteja funcionando com seguranÃ§a, performance e isolamento em containers.

â¡ï¸ O WordPress Ã© a aplicaÃ§Ã£o principal, que depende do MariaDB (para persistÃªncia de dados) e do NGINX + PHP-FPM (para servir conteÃºdo via web).

ğŸ§  O que vocÃª deve entender tecnicamente:

| Conceito                      | ExplicaÃ§Ã£o                                                                                     |
|------------------------------|------------------------------------------------------------------------------------------------|
| Container isolado            | O WordPress roda em seu prÃ³prio container, separado do NGINX e do MariaDB.                    |
| PHP-FPM                      | O WordPress nÃ£o tem servidor embutido. Ele Ã© processado pelo PHP-FPM, que serve o conteÃºdo PHP.|
| ComunicaÃ§Ã£o com MariaDB      | O WordPress se conecta ao banco atravÃ©s de variÃ¡veis de ambiente (host, user, password, etc.). |
| InstalaÃ§Ã£o manual            | O WordPress Ã© baixado manualmente no Dockerfile e instalado diretamente na imagem.             |
| ConfiguraÃ§Ã£o por volume      | Os arquivos do WordPress sÃ£o persistidos em volume (`/var/www/html`) para garantir persistÃªncia.|
| VariÃ¡veis de ambiente        | Definidas no `.env`, sÃ£o usadas para configurar o acesso ao banco e inicializar a aplicaÃ§Ã£o.   |
| Arquivo `wp-config.php`      | Esse arquivo de configuraÃ§Ã£o deve ser ajustado dinamicamente para consumir as variÃ¡veis do `.env`. |

---

âœ… 1. Checklist de ValidaÃ§Ã£o da Task "Implementar ServiÃ§o WordPress"

ğŸ“‹ **Checklist TÃ©cnico e Funcional**

### ğŸ”§ Estrutura e ConfiguraÃ§Ã£o
- Existe um diretÃ³rio `requirements/wordpress` com:
  - `Dockerfile`
  - Script de configuraÃ§Ã£o (como `setup.sh`, se necessÃ¡rio)
  - DiretÃ³rio `wordpress/` com arquivos persistidos

### ğŸ³ Dockerfile
- Baseado em Alpine ou Debian (Debian geralmente para melhor compatibilidade com PHP).
- Instala pacotes obrigatÃ³rios:
  - `php`, `php-fpm`, `php-mysqli`, `php-exif`, `php-gd`, `php-curl`, `php-xml`, `php-mbstring` etc.
- Faz download e extraÃ§Ã£o do WordPress (versÃ£o estÃ¡vel).
- Copia ou gera um `wp-config.php` com uso de variÃ¡veis de ambiente.
- ExpÃµe a porta `9000` (PHP-FPM).
- Usa `ENTRYPOINT` com `exec php-fpm7.4 -F` (ou equivalente), sem `tail -f` ou `sleep`.

### ğŸ”Œ IntegraÃ§Ã£o com MariaDB
- ConexÃ£o ao banco deve usar variÃ¡veis como `MYSQL_HOST`, `MYSQL_USER`, `MYSQL_PASSWORD`, `MYSQL_DATABASE`.
- O container deve esperar pelo banco antes de tentar se conectar (use `wait-for-it.sh` se necessÃ¡rio).

### ğŸ’¾ PersistÃªncia
- O volume `/var/www/html` estÃ¡ montado para armazenar os arquivos do WordPress.
- Os dados nÃ£o devem ser apagados em rebuild do container.

### ğŸ“¦ Docker Compose
- O serviÃ§o `wordpress` estÃ¡ definido no `docker-compose.yml`.
- Conecta-se Ã  rede `inception`.
- Depende dos containers `nginx` e `mariadb`.

---

ğŸ§© Subtasks Relacionadas:

| Subtask                                                                                 | Status |
|------------------------------------------------------------------------------------------|--------|
| Criar Dockerfile baseado em Alpine ou Debian.                                            | ğŸ”§     |
| Instalar PHP, PHP-FPM e extensÃµes necessÃ¡rias (php-mysqli, php-curl, etc).              | ğŸ”§     |
| Instalar WordPress manualmente na imagem.                                                | ğŸ”§     |
| Configurar PHP-FPM corretamente para servir o WordPress.                                | ğŸ”§     |
| WordPress deve apontar para o container MariaDB via variÃ¡veis do `.env`.                | ğŸ”§     |
| Utilizar variÃ¡veis de ambiente para configuraÃ§Ã£o de acesso ao banco no `wp-config.php`. | ğŸ”§     |
| Persistir os arquivos do WordPress no volume correto (`/var/www/html`).                 | ğŸ”§     |

---

Se quiser, posso te ajudar a transformar cada bloco desses em issues automaticamente com um script usando a GitHub API, ou gerar um template .md para importar direto. Deseja isso?











ğŸŒ ServiÃ§o NGINX
Title: Implementar ServiÃ§o NGINX com HTTPS (TLSv1.2 ou TLSv1.3)
Description:
- Criar Dockerfile para Nginx baseado em Alpine ou Debian.
- Instalar e configurar o Nginx.
- Criar certificados SSL/TLS self-signed.
- Configurar Nginx para escutar apenas na porta 443 com HTTPS.
- Permitir apenas TLSv1.2 ou TLSv1.3 no server.
- Redirecionar requisiÃ§Ãµes para o PHP-FPM de WordPress (FastCGI).
- Utilizar variÃ¡veis de ambiente para certs paths.

âœ… ExplicaÃ§Ã£o completa do porquÃª do NGINX neste projeto:

ğŸ“Œ O que Ã© o NGINX?
NGINX Ã© um servidor web de alto desempenho, open-source, usado amplamente para servir sites estÃ¡ticos, fazer proxy reverso, balanceamento de carga, entre outros. Ele Ã© leve, eficiente e altamente configurÃ¡vel â€” ideal para ambientes com recursos limitados como containers Docker.

ğŸ¯ Por que estamos usando o NGINX nesse projeto Inception?
Porque o WordPress, apesar de ser uma aplicaÃ§Ã£o PHP, nÃ£o expÃµe suas pÃ¡ginas diretamente. Ele precisa de um servidor web que:

- Sirva as pÃ¡ginas HTML geradas.
- Redirecione as requisiÃ§Ãµes dinÃ¢micas `.php` para o interpretador PHP-FPM.
- Implemente HTTPS com certificados SSL.
- Garanta performance e seguranÃ§a na entrega dos conteÃºdos.

â¡ï¸ O NGINX atua como **gateway HTTP seguro**:
- Recebe todas as requisiÃ§Ãµes.
- Garante que **tudo seja servido por HTTPS** (sem porta 80).
- Redireciona as requisiÃ§Ãµes `.php` para o container do WordPress/PHP-FPM.
- Gerencia certificados e seguranÃ§a TLS.

ğŸ§  O que vocÃª deve entender tecnicamente:
| Conceito                        | ExplicaÃ§Ã£o                                                                 |
|--------------------------------|----------------------------------------------------------------------------|
| Container isolado              | O NGINX roda em seu prÃ³prio container, separado do WordPress e do MariaDB.|
| ComunicaÃ§Ã£o via rede Docker    | Ele se comunica com o WordPress atravÃ©s da mesma rede Docker (`inception`).|
| Certificados self-signed       | Em ambiente de desenvolvimento, usamos certificados SSL autoassinados.     |
| HTTPS na porta 443             | Nenhum acesso via HTTP. Somente conexÃµes HTTPS serÃ£o permitidas.           |
| TLSv1.2/TLSv1.3                | Somente protocolos seguros serÃ£o aceitos.                                 |
| Redirecionamento para PHP-FPM  | O NGINX age como proxy reverso para o WordPress interpretado via PHP-FPM. |
| VariÃ¡veis de ambiente (.env)   | Os caminhos dos certificados serÃ£o configurados por variÃ¡veis no `.env`.  |

---

âœ… 1. Checklist de ValidaÃ§Ã£o da Task "Implementar ServiÃ§o NGINX"

ğŸ“‹ **Checklist TÃ©cnico e Funcional**

### ğŸ”§ Estrutura e ConfiguraÃ§Ã£o
- Existe um diretÃ³rio `requirements/nginx` com:
  - `Dockerfile`
  - `conf/nginx.conf`
  - `tools/generate_cert.sh`
  - `tools/entrypoint.sh`
- Existe um `.env` na pasta `srcs/` com variÃ¡veis:
  - `CERT_PATH`
  - `KEY_PATH`

### ğŸ³ Dockerfile
- A imagem base Ã© Alpine ou Debian.
- Instala `nginx` corretamente.
- Copia o `nginx.conf` para o diretÃ³rio apropriado (`/etc/nginx`).
- Copia e executa `generate_cert.sh` para gerar certs self-signed.
- ExpÃµe a porta `443`.
- Usa `ENTRYPOINT` com `exec` e sem hacks como `tail -f`, `sleep`, etc.

### ğŸ”’ SeguranÃ§a e HTTPS
- `nginx.conf` estÃ¡ configurado para escutar **apenas** na porta 443.
- Protocolos antigos (TLS 1.0/1.1) estÃ£o desativados.
- Apenas TLSv1.2 e TLSv1.3 estÃ£o habilitados.
- Redirecionamento de requisiÃ§Ãµes `.php` para `fastcgi_pass wordpress:9000;` estÃ¡ funcionando.
- Caminhos dos certificados sÃ£o definidos via variÃ¡veis de ambiente no `.env`.

### ğŸ“¦ Docker Compose (opcional para este passo, mas recomendÃ¡vel)
- O `docker-compose.yml` define o serviÃ§o `nginx` corretamente:
  - Monta volume com os certificados.
  - Liga Ã  rede `inception`.
  - Define `depends_on: wordpress`.

ğŸ§ª 2. Como Testar se EstÃ¡ Tudo Certo
ğŸ”Œ **Passos para Testar NGINX em Container**

â–¶ï¸ Executar o Build (caso ainda nÃ£o tenha `docker-compose`)
```bash
cd srcs
docker build -t nginx_test ./requirements/nginx
docker run --rm -it --env-file .env -p 443:443 nginx_test
```

â–¶ï¸ Testar com cURL ou navegador:
curl -k https://localhost
# Deve retornar o conteÃºdo servido via NGINX (ex: pÃ¡gina inicial do WordPress)

â–¶ï¸ Verificar SSL/TLS:
openssl s_client -connect localhost:443
# Verificar que apenas TLSv1.2 e TLSv1.3 sÃ£o permitidos


â–¶ï¸ Se usar docker-compose:
docker-compose up --build nginx

ğŸ§¾ Validar FastCGI e redirecionamento:
- Acessar https://localhost deve carregar a pÃ¡gina inicial do WordPress.
- No nginx.conf, as requisiÃ§Ãµes .php devem ser redirecionadas via fastcgi_pass wordpress:9000.

ğŸ“Œ Subtasks associadas:
ğŸ§© Subtask: Criar Dockerfile para NGINX baseado em Alpine ou Debian #25
ğŸ§© Subtask: Instalar e Configurar o NGINX #26
ğŸ§© Subtask: Criar Certificados SSL/TLS Self-Signed #27
ğŸ§© Subtask: Configurar NGINX para escutar apenas na porta 443 com HTTPS #28
ğŸ§© Subtask: Permitir apenas TLSv1.2 ou TLSv1.3 no server #29
ğŸ§© Subtask: Redirecionar requisiÃ§Ãµes para o PHP-FPM de WordPress (FastCGI) #30
ğŸ§© Subtask: Utilizar variÃ¡veis de ambiente para certs paths #31






ğŸ”’ SeguranÃ§a Geral
Title: Implementar SeguranÃ§a: Portas, Restart e Variables
Description:
- Garantir que sÃ³ o Nginx expÃµe portas (443).
- Definir polÃ­tica de restart: always nos serviÃ§os.
- Nenhuma senha/usuÃ¡rio no cÃ³digo, usar somente variÃ¡veis de ambiente.
- Armazenar todas as credenciais no `.env`.
- Adicionar `.env` ao `.gitignore`.


âš™ï¸ Makefile
Title: Criar Makefile para Automatizar o Build/Up/Down
Description:
- Implementar Makefile com targets:
  - make â†’ docker-compose up --build -d
  - make down â†’ docker-compose down
  - make fclean â†’ docker system prune -af
- O Makefile deve estar na raiz do projeto.
- Usar variÃ¡veis e organizaÃ§Ã£o clara no Makefile.

ğŸ§ª Testes Finais
Title: Testar e Validar a Stack Completa
Description:
- Testar se o domÃ­nio login.42.fr acessa corretamente via HTTPS.
- Verificar se o WordPress conecta ao MariaDB corretamente.
- Testar persistÃªncia de dados em volumes apÃ³s reiniciar containers.
- Garantir que containers reiniciam automaticamente apÃ³s crash.
- Validar TLSv1.2/1.3 no navegador.



---


# Inception - 42sp

## âœ… Objetivo Geral do Projeto

Criar uma infraestrutura baseada em Docker Compose com mÃºltiplos serviÃ§os, cada um em seu prÃ³prio container, simulando uma aplicaÃ§Ã£o em produÃ§Ã£o com seguranÃ§a (TLS), banco de dados e CMS (WordPress).

---

## ğŸ§  Conceitos Fundamentais

| Conceito                | Justificativa                                                                 |
|-------------------------|-------------------------------------------------------------------------------|
| Docker/Dockerfile       | Imagens customizadas, sem usar imagens prontas de serviÃ§os.                   |
| docker-compose          | Orquestra mÃºltiplos containers de forma integrada e reprodutÃ­vel.             |
| Volumes                 | PersistÃªncia de dados (banco e arquivos do site).                             |
| Rede customizada        | ComunicaÃ§Ã£o segura e isolada entre containers.                                |
| TLS/SSL (v1.2/v1.3)     | SeguranÃ§a da aplicaÃ§Ã£o via NGINX.                                             |
| Ambiente isolado (VM)   | Projeto autossuficiente e reprodutÃ­vel.                                       |
| VariÃ¡veis de Ambiente   | SeguranÃ§a e organizaÃ§Ã£o das configuraÃ§Ãµes sensÃ­veis (.env).                   |
| Makefile                | AutomatizaÃ§Ã£o do build e gerenciamento dos serviÃ§os.                          |

---

## ğŸ” Regras ObrigatÃ³rias

### 1. DiretÃ³rio `srcs/`
Todos os arquivos de configuraÃ§Ã£o, Dockerfiles, scripts, etc., devem ficar aqui para garantir organizaÃ§Ã£o.

### 2. Makefile na raiz
Automatiza o build e gerenciamento dos containers.
- Exemplo: `docker compose up --build`
- Pode conter comandos como `docker compose down -v` para limpar volumes.

### 3. Containers obrigatÃ³rios

| ServiÃ§o                | Requisitos                                                                 |
|------------------------|----------------------------------------------------------------------------|
| NGINX                  | Ãšnico ponto de entrada (porta 443), apenas TLSv1.2/1.3.                    |
| WordPress + php-fpm    | CMS rodando em FastCGI, sem nginx.                                         |
| MariaDB                | Banco de dados compatÃ­vel com MySQL.                                       |

Obs: Cada container deve ser isolado.

### 4. Volumes

- Volume 1: Dados do MariaDB
- Volume 2: Arquivos do WordPress

**Motivo:** PersistÃªncia dos dados apÃ³s reinÃ­cio dos containers.

### 5. Rede customizada

Definida no `docker-compose.yml`. NÃ£o usar recursos legados como `--link` ou `network: host`.

### 6. `.env` com variÃ¡veis

Armazena credenciais e configuraÃ§Ãµes sensÃ­veis.
- Deve ser ignorado pelo `.gitignore`.

### 7. ProibiÃ§Ãµes

| Regra                                         | Motivo                                                      |
|-----------------------------------------------|-------------------------------------------------------------|
| NÃ£o usar latest                              | Imagens devem ser versionadas para garantir reprodutibilidade. |
| NÃ£o usar comandos infinitos (`tail -f`, etc.) | Containers devem rodar processos legÃ­timos no PID 1.         |
| NÃ£o expor senhas em Dockerfiles/scripts       | SeguranÃ§a â€” usar ENV.                                       |
| NÃ£o usar imagens prontas                     | O projeto exige imagens a partir do Alpine ou Debian.        |

### 8. DomÃ­nio

Configurar domÃ­nio `seulogin.42.fr` apontando para o IP local da VM.

### 9. WordPress com 2 usuÃ¡rios

- Um usuÃ¡rio admin (sem usar "admin", "administrator", etc).
- Um usuÃ¡rio comum.

---

## ğŸ“ Estrutura Esperada

```
.
â”œâ”€â”€ Makefile
â””â”€â”€ srcs
    â”œâ”€â”€ .env
    â”œâ”€â”€ docker-compose.yml
    â”œâ”€â”€ requirements
    â”‚   â”œâ”€â”€ nginx/
    â”‚   â”œâ”€â”€ wordpress/
    â”‚   â”œâ”€â”€ mariadb/
    â”‚   â””â”€â”€ bonus/
    â””â”€â”€ tools/
```

---

## ğŸ§­ Plano de AÃ§Ã£o â€” Passo a Passo

1. **PreparaÃ§Ã£o do Ambiente**
   - Criar VM Linux
   - Instalar Docker e Docker Compose

2. **Estrutura de diretÃ³rios**
   - Criar `srcs/requirements/{nginx,wordpress,mariadb}`

3. **Criar `.env`**
   ```env
   DOMAIN_NAME=seulogin.42.fr
   MYSQL_ROOT_PASSWORD=xxxx
   MYSQL_USER=xxxx
   MYSQL_PASSWORD=xxxx
   WP_ADMIN_USER=xxxx
   WP_ADMIN_PASS=xxxx
   ```

4. **Criar Dockerfiles**
   - `mariadb/Dockerfile`: instala MariaDB (Alpine/Debian)
   - `wordpress/Dockerfile`: instala php-fpm + WordPress
   - `nginx/Dockerfile`: instala NGINX e gera certificados TLS

5. **Criar `docker-compose.yml`**
   - Usar `build:` para cada serviÃ§o
   - Montar volumes
   - Configurar rede customizada
   - Definir `restart: always`
   - Expor apenas a porta 443 no NGINX
   - Usar `depends_on` conforme necessÃ¡rio

6. **Automatizar com Makefile**
   ```makefile
   all:
       docker compose -f srcs/docker-compose.yml --env-file srcs/.env up --build

   down:
       docker compose -f srcs/docker-compose.yml down

   fclean:
       docker system prune -af
   ```

7. **Gerar certificados TLS**
   - Usar `openssl` para criar `.key` e `.crt` em `tools/nginx`
   - Montar volume para o NGINX acessar os certificados

8. **Configurar `/etc/hosts`**
   ```
   127.0.0.1    seu_login.42.fr
   ```

---

## âš™ï¸ Makefile

- Implementar Makefile com targets:
  - `make` â†’ `docker-compose up --build -d`
  - `make down` â†’ `docker-compose down`
  - `make fclean` â†’ `docker system prune -af`
- O Makefile deve estar na raiz do projeto.
- Usar variÃ¡veis e organizaÃ§Ã£o clara no Makefile.

---

## ğŸ§ª Testes Finais

- Testar se o domÃ­nio `login.42.fr` acessa corretamente via HTTPS.
- Verificar se o WordPress conecta ao MariaDB corretamente.
- Testar persistÃªncia de dados em volumes apÃ³s reiniciar containers.
- Garantir que containers reiniciam automaticamente apÃ³s crash.
- Validar TLSv1.2/1.3 no navegador.

---

## ğŸ“š Fontes de Estudo

- [Docker Compose](https://docs.docker.com/compose/)
- [Dockerfile Best Practices](https://docs.docker.com/develop/develop-images/dockerfile_best-practices/)
- [WordPress + MariaDB via Docker](https://developer.wordpress.org)
- [TLS via OpenSSL](https://wiki.openssl.org/index.php/Command_Line_Utilities)
- [PID 1 & ENTRYPOINT](https://0pointer.de/blog/projects/container.html)
- [Como criar Makefile](https://opensource.com/article/19/8/what-how-makefile)

---

## ğŸ“ Resumo (TL;DR)

O projeto Inception consiste em montar uma infraestrutura com 3 containers: NGINX + TLS, WordPress + php-fpm e MariaDB, cada um com sua prÃ³pria imagem baseada em Alpine ou Debian.  
Os dados devem ser persistidos em volumes.  
As credenciais ficam no `.env` (ignorado pelo Git).  
A comunicaÃ§Ã£o entre containers Ã© feita por uma rede Docker customizada.  
A entrada Ã© exclusivamente pelo NGINX na porta 443, com TLSv1.2 ou 1.3.  
NÃ£o pode usar loops infinitos nos containers.  
O Makefile deve construir toda a stack.

---